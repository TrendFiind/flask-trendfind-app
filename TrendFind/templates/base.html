<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}TrendFind{% endblock %}</title>

  <!-- Core CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

  <!-- Site-wide styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    /* Logo matches index.html positioning */
    .header-content {
      display: flex; align-items: center; justify-content: space-between;
      width: 100%; max-width: 1200px; margin: 0 auto; position: relative;
    }
    .logo-container { flex: 1; text-align: center; }
    .logo {
      width: 250px; height: auto;
      position: absolute; left: 50%; top: -72px;
      transform: translateX(-50%);
      transition: transform .3s ease-in-out;
    }
    .logo:hover { transform: translateX(-50%) scale(1.05); }
  </style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="header">
  <div class="header-content">
    <button class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Toggle Sidebar">
      <span></span><span></span><span></span>
    </button>
    <div class="logo-container">
      <a href="/"><img src="{{ url_for('static', filename='images/Logo.png') }}" alt="TrendFind Logo" class="logo"></a>
    </div>
    {% block dark_toggle %}
    <button id="dark-mode-toggle" class="dark-mode-toggle"><i class="fas fa-moon"></i></button>
    {% endblock %}
  </div>
</header>

<!-- ===== SIDEBAR ===== -->
<nav class="sidebar" id="sidebar" aria-label="Main Navigation">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/profile">Profile</a></li>
    <li><a href="/saved-products">Saved Products</a></li>
    <li><a href="/plan-details">Plan Details</a></li>
    <li><a href="/faq">FAQ</a></li>
    <li><a href="/about-us">About Us</a></li>
    <li><a href="/contact-us">Contact Us</a></li>
  </ul>
</nav>

<main>
  {% block content %}{% endblock %}
</main>

<footer class="footer">
  <!-- Your footer -->
</footer>

<!-- ===== SCRIPTS ===== -->
<script defer src="{{ url_for('static', filename='js/responsive.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
function toggleSidebar(){
  const sb=document.getElementById('sidebar');
  const btn=document.querySelector('.sidebar-toggle');
  sb.classList.toggle('open');
  const bars=btn.querySelectorAll('span');
  if(sb.classList.contains('open')){
    bars[0].style.transform='rotate(45deg) translate(5px,5px)';
    bars[1].style.opacity='0';
    bars[2].style.transform='rotate(-45deg) translate(5px,-5px)';
  }else{
    bars.forEach(b=>{b.style.transform='';b.style.opacity='';});
  }
}
document.getElementById('dark-mode-toggle')?.addEventListener('click',function(){
  document.body.classList.toggle('light-mode');
  const icon=this.querySelector('i');
  if(document.body.classList.contains('light-mode')){
    icon.classList.replace('fa-moon','fa-sun');
    localStorage.setItem('darkMode','disabled');
  }else{
    icon.classList.replace('fa-sun','fa-moon');
    localStorage.setItem('darkMode','enabled');
  }
});
document.addEventListener('DOMContentLoaded',()=>{
  if(localStorage.getItem('darkMode')==='disabled'){
    document.body.classList.add('light-mode');
    const i=document.querySelector('#dark-mode-toggle i');
    if(i) i.classList.replace('fa-moon','fa-sun');
  }
});
document.addEventListener('click',e=>{
  const sb=document.getElementById('sidebar');
  const toggle=document.querySelector('.sidebar-toggle');
  if(sb.classList.contains('open')&&!sb.contains(e.target)&&!toggle.contains(e.target)){
    toggleSidebar();
  }
});
</script>
</body>
</html>
